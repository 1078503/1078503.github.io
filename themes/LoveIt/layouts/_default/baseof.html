{{- /* LoveIt theme version detection */ -}}
{{- if ne .Site.Params.version "0.1.X" -}}
{{- errorf "\n\nThere are two possible situations that led to this error:\n  1. You haven't copied the config.toml yet. See https://github.com/dillonzq/LoveIt#installation \n  2. You have an incompatible update. See https://github.com//dillonzq/LoveIt/blob/master/CHANGELOG.md \n\n有两种可能的情况会导致这个错误发生:\n  1. 你还没有复制 config.toml 参考 https://github.com/dillonzq/LoveIt#installation \n  2. 你进行了一次不兼容的更新 参考 https://github.com//dillonzq/LoveIt/blob/master/CHANGELOG.md \n" -}}
{{- end -}}

{{- if eq (getenv "HUGO_ENV") "production" -}}
{{- .Scratch.Set "production" true -}}
{{- .Scratch.Set "CDN" .Site.Params.cdn -}}
{{- end -}}

<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <title>
        {{- block "title" . }}{{ .Site.Title }}{{ end -}}
    </title>
    <meta name="Description" content="{{ .Params.description | default .Site.Params.description }}">

    <link rel=stylesheet
        href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Cinzel+Decorative:wght@700&display=swap"
        media=print onload="this.media='all'"><noscript>
        <link rel=stylesheet
            href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Cinzel+Decorative:wght@700&display=swap">
        </noscript>

    <link rel="stylesheet" href="https://api.ditou.org/disqus/dist/iDisqus.min.css">
    <script src="https://api.ditou.org/disqus/dist/iDisqus.min.js"></script>
    <script data-ad-client="ca-pub-5883329460904326" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    {{- partial "head/meta.html" . -}}
    {{- partial "head/link.html" . -}}
    {{- partial "head/seo.html" . -}}

    <!-- Matomo -->
    <script type="text/javascript">
        var _paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function () {
            var u = "//status.ditou.org/";
            _paq.push(['setTrackerUrl', u + 'matomo.php']);
            _paq.push(['setSiteId', '1']);
            var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
            g.type = 'text/javascript'; g.async = true; g.defer = true; g.src = u + 'matomo.js'; s.parentNode.insertBefore(g, s);
        })();
    </script>
    <!-- End Matomo Code -->

</head>

<body>
    {{- /* Check theme isDark before body rendering */ -}}
    <script>
        if (!window.localStorage || !window.localStorage.getItem('theme')) {
            { { - $theme := .Site.Params.defaultTheme -} }
            { { - if eq $theme "auto" -} }
            window.isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            { { - else -} }
            window.isDark = '{{ $theme }}' === 'dark';
            { { - end -} }
        } else {
            window.isDark = (window.localStorage && window.localStorage.getItem('theme')) === 'dark';
        }
        window.isDark && document.body.classList.add('dark-theme');
    </script>

    {{- /* Body wrapper */ -}}
    <div class="wrapper">
        {{- partial "header.html" . -}}
        <main class="main">
            <div class="container">
                {{- block "content" . }}{{ end -}}
            </div>
        </main>
        {{- partial "footer.html" . -}}
    </div>

    {{- /* Dynamic to top button */ -}}
    <a href="#" class="dynamic-to-top animated faster" id="dynamic-to-top">
        <span>&nbsp;</span>
    </a>

    {{- /* Load script */ -}}
    {{- partial "script.html" . -}}

    <script src="//instant.page/3.0.0" type="module" defer
        integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
</body>

</html>
